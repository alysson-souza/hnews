import{Cb as m,W as i,Z as d,a as c,aa as u,b as p,ma as s}from"./chunk-YMVQ6C4T.js";var v=new d("API_CONFIG",{providedIn:"root",factory:()=>({microlink:{apiKey:void 0,apiUrl:"https://api.microlink.io"},linkpreview:{apiKey:void 0,apiUrl:"https://api.linkpreview.net"},opengraphio:{appId:void 0,apiUrl:"https://opengraph.io/api/1.1/site"}})});function x(r){return u([{provide:v,useValue:r||{microlink:{apiKey:void 0,apiUrl:"https://api.microlink.io"},linkpreview:{apiKey:void 0,apiUrl:"https://api.linkpreview.net"},opengraphio:{appId:void 0,apiUrl:"https://opengraph.io/api/1.1/site"}}}])}var I=class r{isOpen=s(!1);currentItemId=s(null);openSidebar(e){this.currentItemId.set(e),this.isOpen.set(!0)}closeSidebar(){this.isOpen.set(!1),setTimeout(()=>{this.isOpen()||this.currentItemId.set(null)},300)}toggleSidebar(e){this.currentItemId()===e&&this.isOpen()?this.closeSidebar():this.openSidebar(e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=i({token:r,factory:r.\u0275fac,providedIn:"root"})};var h=class r{selectedIndex=s(null);totalItems=s(0);isSelected=m(()=>{let e=this.selectedIndex();return t=>e===t});setTotalItems(e){this.totalItems.set(e);let t=this.selectedIndex();t!==null&&t>=e&&this.selectedIndex.set(e>0?e-1:null)}selectNext(){let e=this.selectedIndex(),t=this.totalItems();return t===0?!1:e===null?(this.selectedIndex.set(0),!0):e<t-1?(this.selectedIndex.set(e+1),!0):!1}selectPrevious(){let e=this.selectedIndex();return this.totalItems()===0?!1:e===null?(this.selectedIndex.set(0),!0):e>0?(this.selectedIndex.set(e-1),!0):!1}selectFirst(){this.totalItems()>0&&this.selectedIndex.set(0)}selectLast(){let e=this.totalItems();e>0&&this.selectedIndex.set(e-1)}clearSelection(){this.selectedIndex.set(null)}setSelection(e){e>=0&&e<this.totalItems()&&this.selectedIndex.set(e)}setSelectedIndex(e){(e===null||e>=0&&e<this.totalItems())&&this.selectedIndex.set(e)}isAtLastItem(){let e=this.selectedIndex(),t=this.totalItems();return e!==null&&e===t-1}isAtFirstItem(){return this.selectedIndex()===0}static \u0275fac=function(t){return new(t||r)};static \u0275prov=i({token:r,factory:r.\u0275fac,providedIn:"root"})};var g=class r{cacheExpiration=10*60*1e3;storagePrefix="hnews-story-list-";saveState(e,t,o,n,l,b){let S={stories:t,currentPage:o,totalStoryIds:n,openGraphData:Array.from(l.entries()),storyType:e,selectedIndex:b,scrollPosition:window.scrollY,timestamp:Date.now()};try{let a=this.storagePrefix+e;sessionStorage.setItem(a,JSON.stringify(S))}catch(a){console.warn("Failed to save story list state:",a)}}getState(e){try{let t=this.storagePrefix+e,o=sessionStorage.getItem(t);if(!o)return null;let n=JSON.parse(o);return Date.now()-n.timestamp>this.cacheExpiration?(sessionStorage.removeItem(t),null):p(c({},n),{openGraphData:new Map(n.openGraphData)})}catch(t){return console.warn("Failed to retrieve story list state:",t),null}}clearState(e){let t=this.storagePrefix+e;sessionStorage.removeItem(t)}clearAllStates(){Object.keys(sessionStorage).forEach(t=>{t.startsWith(this.storagePrefix)&&sessionStorage.removeItem(t)})}hasValidState(e){let t=this.getState(e);return t!==null&&t.stories.length>0}static \u0275fac=function(t){return new(t||r)};static \u0275prov=i({token:r,factory:r.\u0275fac,providedIn:"root"})};export{v as a,x as b,I as c,h as d,g as e};
