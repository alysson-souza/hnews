import{V as a}from"./chunk-SJE556VZ.js";var r=class s{STORAGE_KEY="hn_visited_stories";MAX_VISITED=1e3;visitedMap=new Map;constructor(){this.loadVisited()}loadVisited(){try{let t=localStorage.getItem(this.STORAGE_KEY);t&&JSON.parse(t).forEach(e=>this.visitedMap.set(e.storyId,e))}catch(t){console.error("Failed to load visited stories:",t)}}saveVisited(){try{let t=Array.from(this.visitedMap.values()).sort((i,e)=>e.visitedAt-i.visitedAt).slice(0,this.MAX_VISITED);localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}catch(t){console.error("Failed to save visited stories:",t)}}markAsVisited(t,i){let e=this.visitedMap.get(t),o={storyId:t,visitedAt:Date.now(),commentCount:i??e?.commentCount};this.visitedMap.set(t,o),this.saveVisited()}isVisited(t){return this.visitedMap.has(t)}getVisitedData(t){return this.visitedMap.get(t)}hasNewComments(t,i){let e=this.visitedMap.get(t);return!e||e.commentCount===void 0?!1:i>e.commentCount}getNewCommentCount(t,i){let e=this.visitedMap.get(t);return!e||e.commentCount===void 0?0:Math.max(0,i-e.commentCount)}clearVisited(){this.visitedMap.clear(),localStorage.removeItem(this.STORAGE_KEY)}static \u0275fac=function(i){return new(i||s)};static \u0275prov=a({token:s,factory:s.\u0275fac,providedIn:"root"})};export{r as a};
