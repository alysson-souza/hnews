import{Eb as c,U as a,Z as m,ga as o,ka as h}from"./chunk-QTVO7DHF.js";var l=class s{STORAGE_KEY="hnews-theme";document=m(o);theme=h("auto");effectiveTheme=h("light");mediaQuery=window.matchMedia("(prefers-color-scheme: dark)");constructor(){this.loadTheme(),this.setupThemeEffect(),this.setupSystemThemeListener()}loadTheme(){let e=localStorage.getItem(this.STORAGE_KEY);this.document.documentElement.classList.toggle("dark",e==="dark"||!e&&this.mediaQuery.matches),e==="light"||e==="dark"?this.theme.set(e):this.theme.set("auto")}setupThemeEffect(){c(()=>{let e=this.theme();this.applyTheme(e)})}setupSystemThemeListener(){this.mediaQuery.addEventListener("change",()=>{this.theme()==="auto"&&this.applyTheme("auto")})}applyTheme(e){let t=this.document.documentElement;if(e==="light")localStorage.setItem(this.STORAGE_KEY,"light"),t.classList.remove("dark"),this.effectiveTheme.set("light");else if(e==="dark")localStorage.setItem(this.STORAGE_KEY,"dark"),t.classList.add("dark"),this.effectiveTheme.set("dark");else{localStorage.removeItem(this.STORAGE_KEY);let i=this.mediaQuery.matches;t.classList.toggle("dark",i),this.effectiveTheme.set(i?"dark":"light")}let r=this.document.querySelector('meta[name="theme-color"]');if(r){let i=this.effectiveTheme();r.setAttribute("content",i==="dark"?"#1f2937":"#3B5998")}}setTheme(e){this.theme.set(e)}toggleTheme(){let e=this.theme();e==="light"?this.setTheme("dark"):e==="dark"?this.setTheme("auto"):this.setTheme("light")}getNextThemeLabel(){let e=this.theme();return e==="light"?"Dark":e==="dark"?"Auto":"Light"}static \u0275fac=function(t){return new(t||s)};static \u0275prov=a({token:s,factory:s.\u0275fac,providedIn:"root"})};export{l as a};
