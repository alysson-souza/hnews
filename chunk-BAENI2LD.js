import{Ab as d,U as r,a as c,ka as n}from"./chunk-MB3G5S6I.js";var u=class s{isOpen=n(!1);currentItemId=n(null);openSidebar(e){this.currentItemId.set(e),this.isOpen.set(!0)}closeSidebar(){this.isOpen.set(!1),setTimeout(()=>{this.isOpen()||this.currentItemId.set(null)},300)}toggleSidebar(e){this.currentItemId()===e&&this.isOpen()?this.closeSidebar():this.openSidebar(e)}static \u0275fac=function(t){return new(t||s)};static \u0275prov=r({token:s,factory:s.\u0275fac,providedIn:"root"})};var I=class s{selectedIndex=n(null);totalItems=n(0);isSelected=d(()=>{let e=this.selectedIndex();return t=>e===t});setTotalItems(e){this.totalItems.set(e);let t=this.selectedIndex();t!==null&&t>=e&&this.selectedIndex.set(e>0?e-1:null)}selectNext(){let e=this.selectedIndex(),t=this.totalItems();return t===0?!1:e===null?(this.selectedIndex.set(0),!0):e<t-1?(this.selectedIndex.set(e+1),!0):!1}selectPrevious(){let e=this.selectedIndex();return this.totalItems()===0?!1:e===null?(this.selectedIndex.set(0),!0):e>0?(this.selectedIndex.set(e-1),!0):!1}selectFirst(){this.totalItems()>0&&this.selectedIndex.set(0)}selectLast(){let e=this.totalItems();e>0&&this.selectedIndex.set(e-1)}clearSelection(){this.selectedIndex.set(null)}setSelection(e){e>=0&&e<this.totalItems()&&this.selectedIndex.set(e)}setSelectedIndex(e){(e===null||e>=0&&e<this.totalItems())&&this.selectedIndex.set(e)}isAtLastItem(){let e=this.selectedIndex(),t=this.totalItems();return e!==null&&e===t-1}isAtFirstItem(){return this.selectedIndex()===0}static \u0275fac=function(t){return new(t||s)};static \u0275prov=r({token:s,factory:s.\u0275fac,providedIn:"root"})};var f=class s{cacheExpiration=600*1e3;storagePrefix="hnews-story-list-";saveState(e,t,i,o,a){let h={stories:t,currentPage:i,totalStoryIds:o,storyType:e,selectedIndex:a,scrollPosition:window.scrollY,timestamp:Date.now()};try{let l=this.storagePrefix+e;sessionStorage.setItem(l,JSON.stringify(h))}catch(l){console.warn("Failed to save story list state:",l)}}getState(e){try{let t=this.storagePrefix+e,i=sessionStorage.getItem(t);if(!i)return null;let o=JSON.parse(i);return Date.now()-o.timestamp>this.cacheExpiration?(sessionStorage.removeItem(t),null):c({},o)}catch(t){return console.warn("Failed to retrieve story list state:",t),null}}clearState(e){let t=this.storagePrefix+e;sessionStorage.removeItem(t)}clearAllStates(){Object.keys(sessionStorage).forEach(t=>{t.startsWith(this.storagePrefix)&&sessionStorage.removeItem(t)})}hasValidState(e){let t=this.getState(e);return t!==null&&t.stories.length>0}static \u0275fac=function(t){return new(t||s)};static \u0275prov=r({token:s,factory:s.\u0275fac,providedIn:"root"})};export{u as a,I as b,f as c};
